\ Terminal
target definitions

: BACKSPACE ( c-addr -- c-addr' )      1 chars - ;
: ACCEPT-CHAR ( c-addr ch -- c-addr' ) over c!   char+ ;

: ACCEPT ( c-addr max -- len )
  drop dup >R  \ TODO Ignores the max length!
  BEGIN key   dup $0a <> WHILE \ ( c-addr key )
    dup $08 = IF drop R@ backspace ELSE accept-char THEN
  REPEAT ( end newline   R: start ) drop R> - ( len ) ;

: CR ( -- ) $0a emit ;

